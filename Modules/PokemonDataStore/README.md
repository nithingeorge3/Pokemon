# **PokemonDataStore**

The **`PokemonDataStore`** module provides a simple, reusable wrapper for data persistence, enabling efficient data saving and retrieval. It abstracts the complexities of data storage, offering a clean interface for developers to interact with data generated by the PokemonNetworking module.

---

## **Features**

- Pagination Storage: Track API pagination progress locally.
- Game State: Track played/unplayed Pokemon and user scores.
- Preferences: Save user settings (silhouette mode, themes).
- Batch Operations: Efficiently save paginated API responses.

---

## Database Schema
<img src="Modules/PokemonDataStore/swiftdata_schema/dataStore.png"  width="100%" height="100%">

Handles Pokemon data interactions.
```swift
public protocol PaginationSDRepositoryType: Sendable {
    func fetchPokemonPagination(_ entityType: EntityType) async throws -> PaginationDomain
    func updatePokemonPagination(_ pagination: PaginationDomain) async throws
}
```

```swift
public protocol PokemonSDRepositoryType: Sendable {
    func fetchPokemon(for pokemonID: Int) async throws -> PokemonDomain
    func fetchRandomUnplayedPokemon(excluding excludedID: Int?) async throws -> PokemonDomain
    func fetchPokemon(offset: Int, pageSize: Int) async throws -> [PokemonDomain]
    func fetchRandomOptions(excluding id: Int, count: Int) async throws -> [PokemonDomain]
    func savePokemon(_ pokemon: [PokemonDomain]) async throws
}
```

```swift
public protocol UserSDRepositoryType: Sendable {
    func getOrCreateGuest() async throws -> UserDomain
    func updateScore(_ points: Int) async throws
    func getCurrentUser() async throws -> UserDomain
    
    
    //ToDo: later use WritableKeyPath and inject userID
    func updatePreferences(_ newPref: PreferenceDomain) async throws
    func getCurrentPreferences() async throws -> PreferenceDomain
    
    //Game
    func updatePlayedStatus(pokemonId: Int, outcome: GameOutcome) async throws
}
```
